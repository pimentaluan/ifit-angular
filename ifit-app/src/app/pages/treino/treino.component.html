<div class="container mx-auto p-4">
  <h2 class="text-2xl font-bold mb-2">
    Treino Personalizado para {{ usuario()?.nome || nome }}
  </h2>

  <div class="text-sm text-gray-700 space-y-1 mb-4">
    <p *ngIf="usuario()">Idade: {{ usuario()?.idade }} anos</p>
    <p *ngIf="usuario()">Objetivo: {{ usuario()?.objetivo }}</p>
    <p *ngIf="usuario()">Local de treino: {{ usuario()?.local }}</p>
    <p *ngIf="usuario()">Nível: {{ usuario()?.nivel }}</p>
    <p *ngIf="usuario()">Frequência semanal: {{ usuario()?.frequencia }}x</p>
  </div>

  <ng-container *ngIf="carregando(); else conteudo"></ng-container>
  <ng-template #conteudo>
    <div *ngIf="erro(); else ok">
      <p class="text-red-600 font-semibold">{{ erro() }}</p>
    </div>

    <ng-template #ok>
      <div *ngIf="treinoGerado().length > 0; else semTreino" class="space-y-6">
        <div
          *ngFor="let dia of treinoGerado(); let i = index"
          class="rounded-lg border p-4 bg-white"
        >
          <h3 class="font-semibold text-lg mb-2">
            Dia {{ i + 1 }} — {{ dia.parte }}
          </h3>

          <ul class="space-y-2">
            <li
              *ngFor="let ex of dia.exercicios"
              class="bg-gray-100 rounded-md p-3"
            >
              <div class="flex items-center justify-between">
                <strong>{{ ex?.nome }}</strong>
                <span class="text-sm text-gray-600">
                  {{ ex?.series }} x {{ ex?.reps }}
                </span>
              </div>
              <p *ngIf="ex?.instrucoes" class="text-sm text-gray-600 italic mt-1">
                {{ ex?.instrucoes }}
              </p>
            </li>
          </ul>
        </div>
      </div>

      <ng-template #semTreino>
        <p class="text-gray-700">Nenhum treino disponível para este usuário.</p>
      </ng-template>
    </ng-template>
  </ng-template>
</div>
