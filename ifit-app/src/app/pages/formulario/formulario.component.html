<div class="max-w-2xl mx-auto p-4">
  <h2 class="text-2xl font-bold mb-4">Gerar Treino</h2>

  <form #f="ngForm" (ngSubmit)="gerarTreino(f)" novalidate class="space-y-4">

    <!-- Nome -->
    <div>
      <label class="block text-sm font-medium mb-1" for="nome">Nome</label>
      <input
        id="nome"
        name="nome"
        type="text"
        class="w-full border rounded p-2"
        [(ngModel)]="form.nome"
        #nome="ngModel"
        required
      />
      @if (nome.invalid && nome.touched) {
        <div class="text-red-600 text-sm mt-1">Informe o nome.</div>
      }
    </div>

    <!-- Email -->
    <div>
      <label class="block text-sm font-medium mb-1" for="email">Email</label>
      <input
        id="email"
        name="email"
        type="email"
        class="w-full border rounded p-2"
        [(ngModel)]="form.email"
        #email="ngModel"
        required
        email
      />
      @if (email.invalid && email.touched) {
        <div class="text-red-600 text-sm mt-1">Informe um e-mail válido.</div>
      }
    </div>

    <!-- Objetivo -->
    <div>
      <label class="block text-sm font-medium mb-1" for="objetivo">Objetivo</label>
      <select
        id="objetivo"
        name="objetivo"
        class="w-full border rounded p-2"
        [(ngModel)]="form.objetivo"
        #objetivo="ngModel"
        required
      >
        <option value="" disabled selected>Selecione</option>
        <option value="hipertrofia">Hipertrofia</option>
        <option value="resistência">Resistência</option>
        <option value="emagrecimento">Emagrecimento</option>
      </select>
      @if (objetivo.invalid && objetivo.touched) {
        <div class="text-red-600 text-sm mt-1">Selecione o objetivo.</div>
      }
    </div>

    <!-- Idade -->
    <div>
      <label class="block text-sm font-medium mb-1" for="idade">Idade</label>
      <input
        id="idade"
        name="idade"
        type="number"
        class="w-full border rounded p-2"
        [(ngModel)]="form.idade"
        #idade="ngModel"
        required
        min="16"
        max="120"
      />
      @if (((form.idade ?? 0) < 16) && idade.touched) {
        <div class="text-red-600 text-sm mt-1">Idade mínima é 16.</div>
      }
      @if (((form.idade ?? 0) > 120) && idade.touched) {
        <div class="text-red-600 text-sm mt-1">Idade máxima é 120.</div>
      }
    </div>

    <!-- Frequência (dias/semana) -->
    <div>
      <label class="block text-sm font-medium mb-1" for="frequencia">Frequência (dias/semana)</label>
      <input
        id="frequencia"
        name="frequencia"
        type="number"
        class="w-full border rounded p-2"
        [(ngModel)]="form.frequencia"
        #frequencia="ngModel"
        required
        min="1"
        max="7"
      />
      @if (frequencia.invalid && frequencia.touched) {
        <div class="text-red-600 text-sm mt-1">Informe um valor entre 1 e 7.</div>
      }
    </div>

    <!-- Local -->
    <div>
      <label class="block text-sm font-medium mb-1" for="local">Local de treino</label>
      <select
        id="local"
        name="local"
        class="w-full border rounded p-2"
        [(ngModel)]="form.local"
        #local="ngModel"
        required
      >
        <option value="" disabled selected>Selecione</option>
        <option value="academia">Academia</option>
        <option value="casa">Casa</option>
      </select>
      @if (local.invalid && local.touched) {
        <div class="text-red-600 text-sm mt-1">Selecione o local.</div>
      }
    </div>

    <!-- Nível (opcional) -->
    <div>
      <label class="block text-sm font-medium mb-1" for="nivel">Nível (opcional)</label>
      <select
        id="nivel"
        name="nivel"
        class="w-full border rounded p-2"
        [(ngModel)]="form.nivel"
      >
        <option value="">—</option>
        <option value="iniciante">Iniciante</option>
        <option value="intermediário">Intermediário</option>
        <option value="avançado">Avançado</option>
      </select>
    </div>

    <!-- Lesão (opcional) -->
    <div>
      <label class="block text-sm font-medium mb-1" for="lesao">Lesão/Restrição (opcional)</label>
      <input
        id="lesao"
        name="lesao"
        type="text"
        class="w-full border rounded p-2"
        [(ngModel)]="form.lesao"
        placeholder="Ex.: joelho, ombro, nenhuma"
      />
    </div>

    <!-- Mensagens globais -->
    @if (mensagemErro) {
      <div class="text-red-700 font-semibold">{{ mensagemErro }}</div>
    }
    @if (mensagemSucesso) {
      <div class="text-green-700 font-semibold">{{ mensagemSucesso }}</div>
    }

    <button
      type="submit"
      class="bg-black text-white px-4 py-2 rounded disabled:opacity-50"
      [disabled]="f.invalid"
    >
      Gerar Treino
    </button>
  </form>
</div>
